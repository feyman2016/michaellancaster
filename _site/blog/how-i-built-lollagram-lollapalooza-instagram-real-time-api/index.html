<!DOCTYPE html>
<!--[if lt IE 9]> <html class="no-js ie"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title> How I built Lollagram with Instagram real time API |  Michael Lancaster Web Engineer based in Chicago - IL</title>

    <!-- metas -->
    <meta name="description" content=" How I built Lollagram with Instagram real time API |  Michael Lancaster Web Engineer based in Chicago - IL">
    <meta name="viewport" content="width=device-width">
    <meta property="og:title" content="How I built Lollagram with Instagram real time API by Michael Lancaster">
	<meta property="og:site_name" content="By Michael Lancaster">
	<meta property="og:url" content="http://www.bymichaellancaster.com">
	<meta property="og:image" content="http://www.bymichaellancaster.com/assets/images/cat-javascript.jpg">
	<meta property="og:type" content="blog">
	<meta property="og:description" content="Programming, Hacks, Technology and random thoughts">

    <!-- style -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Nunito:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/style/app.css">

    <!-- RSS feed -->
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml" />
</head>

<body class="" data-ui-widget="widget-rainbow">

	<!-- aside -->
	<aside id="aside">
		<!-- header -->
		<header id="header">
			<h1 class="logo cf">
				<a href="/" title="Michael Lancaster - Front End Developer/HTML5 Soldier">
					<img src="/assets/images/img-profile.jpg" alt="Michael Lancaster - Front End Developer/HTML5 Soldier" class="db fl">
					<span class="tit-author db">Michael Lancaster</span>
					<small class="role-author db">Web Engineer</small>
				</a>
			</h1>

		</header>
		<!-- header / end -->

		<!-- nav -->
		<nav id="nav">
			<ul class="menu">
				<li><a href="/about" title="Life, Work.." class="db">About</a></li>
				<li><a href="#articles-list" title="Code, Technology, Random stuff and afins" class="db" id="bt-show-articles">Articles</a></li>
				<li><a href="/lab" title="Some experiments" class="db">Lab</a></li>
			</ul>
		</nav>
		<!-- nav / end -->

	</aside>
	<!-- aside / end -->

	<!-- mobile navigation -->
	<select id="mb-menu" class="dn">
		<option value="" seleted="selected">Select</option>
		<option value="/">Home</option>
		<option value="/about">About</option>
		<optgroup label="Articles">
			
			<option value="/blog/javascript-object-oriented-simple-form-validation">Javascript Object Oriented simple form validation</option>
			
			<option value="/blog/javascript-data-structure-algorithms-series-ep1">Ep.1 Data Structures and Algorithms with JS</option>
			
			<option value="/blog/speaking-at-front-in-bh-conference-2014">Speaking at Front in BH conference</option>
			
			<option value="/blog/soundcloud-for-desktop-win-mac-released-soundnode-app">Soundnode App - Soundcloud for desktop released</option>
			
			<option value="/blog/soundnode-soundcloud-for-desktop-dev-release">Soundnode App - Soundcloud for Desktop developer release</option>
			
			<option value="/blog/sublime-text-3-jump-to-definition-custom-shortcut">Sublime Text 3 jump to definition/method</option>
			
			<option value="/blog/web-and-automotive-w3c-group">Web and Automotive.</option>
			
			<option value="/blog/DOM-insert-html-method-you-might-not-know-about">DOM insert HTML method you might not know</option>
			
			<option value="/blog/why-i-like-gulpjs-more-than-gruntjs">Why I like GulpJS more than GruntJS</option>
			
			<option value="/blog/playstation4-alert-using-best-buy-api-nodejs-socketio-nedb">PS4 Alerts using BBY API</option>
			
			<option value="/blog/chicago-through-instagram-chicagogram-us">Experience Chicago through Instagram</option>
			
			<option value="/blog/css-bad-and-good-practices-good-tips">CSS Bad and Good practices</option>
			
			<option value="/blog/we-are-influenced-by-people">We are influenced by people</option>
			
			<option value="/blog/javascript-script-dependency-loader-on-demand">My Micro-Library called Jet.js</option>
			
			<option value="/blog/deploying-nodejs-on-heroku-cloud">Deploying Node.js server on Heroku Cloud</option>
			
			<option value="/blog/how-i-built-lollagram-lollapalooza-instagram-real-time-api">How I built Lollagram with Instagram real time API</option>
			
			<option value="/blog/tonights-inspiration">Tonight's inspiration</option>
			
			<option value="/blog/introduction-to-task-runner-gruntjs">Introduction to GruntJS</option>
			
			<option value="/blog/basic-overview-of-client-side-templating">Basic overview of client - side templating</option>
			
			<option value="/blog/from-san-francisco-to-the-brazilian-developers-community">From San Francisco to the Brazilian developers community.</option>
			
			<option value="/blog/fluid-iframe-and-images-without-javascript-plugins">Fluid iframe without use of javascript.</option>
			
			<option value="/blog/css-architecture-for-web-applications">CSS Architecture for Web Applications.</option>
			
			<option value="/blog/secrets-of-lea-verou-css">Secrets of Lea Verou about CSS.</option>
			
			<option value="/blog/inspirational-art-and-code-by-joshua-davis">Inspirational Art and Code by Joshua Davis.</option>
			
			<option value="/blog/the-filter-bubble-and-your-social-life-online">The filter bubble and your social life online.</option>
			
			<option value="/blog/lets-talk-about-rem-units">Let's talk about rem units.</option>
			
			<option value="/blog/two-years-ago-everything-started">Two years ago everything started.</option>
			
			<option value="/blog/what-technologies-im-using-to-blog">What technologies I'm using to blog?!</option>
			
			<option value="/blog/first-things-first">First things first.</option>
			
		</optgroup>
		<option value="/lab">Lab</option>
	</select>
	<!-- mobile navigation / end -->

	<!-- articles list -->
	<ul id="articles-list" class="vh">
		
		<li>
			<a href="/blog/javascript-object-oriented-simple-form-validation" title="Javascript Object Oriented simple form validation">
				<h2 class="ui-tit-02">Javascript Object Oriented simple form validation</h2>
				<span class="ui-date">25 Aug 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/javascript-data-structure-algorithms-series-ep1" title="Ep.1 Data Structures and Algorithms with JS">
				<h2 class="ui-tit-02">Ep.1 Data Structures and Algorithms with JS</h2>
				<span class="ui-date">06 Aug 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/speaking-at-front-in-bh-conference-2014" title="Speaking at Front in BH conference">
				<h2 class="ui-tit-02">Speaking at Front in BH conference</h2>
				<span class="ui-date">30 Jul 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/soundcloud-for-desktop-win-mac-released-soundnode-app" title="Soundnode App - Soundcloud for desktop released">
				<h2 class="ui-tit-02">Soundnode App - Soundcloud for desktop released</h2>
				<span class="ui-date">19 Jun 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/soundnode-soundcloud-for-desktop-dev-release" title="Soundnode App - Soundcloud for Desktop developer release">
				<h2 class="ui-tit-02">Soundnode App - Soundcloud for Desktop developer release</h2>
				<span class="ui-date">13 May 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/sublime-text-3-jump-to-definition-custom-shortcut" title="Sublime Text 3 jump to definition/method">
				<h2 class="ui-tit-02">Sublime Text 3 jump to definition/method</h2>
				<span class="ui-date">03 Mar 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/web-and-automotive-w3c-group" title="Web and Automotive.">
				<h2 class="ui-tit-02">Web and Automotive.</h2>
				<span class="ui-date">26 Feb 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/DOM-insert-html-method-you-might-not-know-about" title="DOM insert HTML method you might not know">
				<h2 class="ui-tit-02">DOM insert HTML method you might not know</h2>
				<span class="ui-date">08 Jan 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/why-i-like-gulpjs-more-than-gruntjs" title="Why I like GulpJS more than GruntJS">
				<h2 class="ui-tit-02">Why I like GulpJS more than GruntJS</h2>
				<span class="ui-date">06 Jan 2014</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/playstation4-alert-using-best-buy-api-nodejs-socketio-nedb" title="PS4 Alerts using BBY API">
				<h2 class="ui-tit-02">PS4 Alerts using BBY API</h2>
				<span class="ui-date">12 Dec 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/chicago-through-instagram-chicagogram-us" title="Experience Chicago through Instagram">
				<h2 class="ui-tit-02">Experience Chicago through Instagram</h2>
				<span class="ui-date">10 Dec 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/css-bad-and-good-practices-good-tips" title="CSS Bad and Good practices">
				<h2 class="ui-tit-02">CSS Bad and Good practices</h2>
				<span class="ui-date">01 Nov 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/we-are-influenced-by-people" title="We are influenced by people">
				<h2 class="ui-tit-02">We are influenced by people</h2>
				<span class="ui-date">15 Oct 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/javascript-script-dependency-loader-on-demand" title="My Micro-Library called Jet.js">
				<h2 class="ui-tit-02">My Micro-Library called Jet.js</h2>
				<span class="ui-date">24 Sep 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/deploying-nodejs-on-heroku-cloud" title="Deploying Node.js server on Heroku Cloud">
				<h2 class="ui-tit-02">Deploying Node.js server on Heroku Cloud</h2>
				<span class="ui-date">19 Sep 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/how-i-built-lollagram-lollapalooza-instagram-real-time-api" title="How I built Lollagram with Instagram real time API">
				<h2 class="ui-tit-02">How I built Lollagram with Instagram real time API</h2>
				<span class="ui-date">09 Sep 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/tonights-inspiration" title="Tonight's inspiration">
				<h2 class="ui-tit-02">Tonight's inspiration</h2>
				<span class="ui-date">25 Aug 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/introduction-to-task-runner-gruntjs" title="Introduction to GruntJS">
				<h2 class="ui-tit-02">Introduction to GruntJS</h2>
				<span class="ui-date">01 Jun 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/basic-overview-of-client-side-templating" title="Basic overview of client - side templating">
				<h2 class="ui-tit-02">Basic overview of client - side templating</h2>
				<span class="ui-date">07 Apr 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/from-san-francisco-to-the-brazilian-developers-community" title="From San Francisco to the Brazilian developers community.">
				<h2 class="ui-tit-02">From San Francisco to the Brazilian developers community.</h2>
				<span class="ui-date">06 Apr 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/fluid-iframe-and-images-without-javascript-plugins" title="Fluid iframe without use of javascript.">
				<h2 class="ui-tit-02">Fluid iframe without use of javascript.</h2>
				<span class="ui-date">12 Mar 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/css-architecture-for-web-applications" title="CSS Architecture for Web Applications.">
				<h2 class="ui-tit-02">CSS Architecture for Web Applications.</h2>
				<span class="ui-date">08 Mar 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/secrets-of-lea-verou-css" title="Secrets of Lea Verou about CSS.">
				<h2 class="ui-tit-02">Secrets of Lea Verou about CSS.</h2>
				<span class="ui-date">03 Mar 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/inspirational-art-and-code-by-joshua-davis" title="Inspirational Art and Code by Joshua Davis.">
				<h2 class="ui-tit-02">Inspirational Art and Code by Joshua Davis.</h2>
				<span class="ui-date">28 Feb 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/the-filter-bubble-and-your-social-life-online" title="The filter bubble and your social life online.">
				<h2 class="ui-tit-02">The filter bubble and your social life online.</h2>
				<span class="ui-date">27 Feb 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/lets-talk-about-rem-units" title="Let's talk about rem units.">
				<h2 class="ui-tit-02">Let's talk about rem units.</h2>
				<span class="ui-date">26 Feb 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/two-years-ago-everything-started" title="Two years ago everything started.">
				<h2 class="ui-tit-02">Two years ago everything started.</h2>
				<span class="ui-date">25 Feb 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/what-technologies-im-using-to-blog" title="What technologies I'm using to blog?!">
				<h2 class="ui-tit-02">What technologies I'm using to blog?!</h2>
				<span class="ui-date">30 Jan 2013</span>
			</a>
		</li>
		
		<li>
			<a href="/blog/first-things-first" title="First things first.">
				<h2 class="ui-tit-02">First things first.</h2>
				<span class="ui-date">30 Jan 2013</span>
			</a>
		</li>
		
	</ul>
	<!-- articles list -->

	<div id="content">

		<article class="post">

    <h2 class="ui-tit-01">How I built Lollagram with Instagram real time API</h2>

    <span class="ui-date db">09 Sep 13</span>

    <!-- <span class="category">Category: </span> -->

	<div class="ui-copy"><p>[post under improvements]</p>

<h2>What is Lollagram?</h2>

<p>[from the Application] <a href="http://www.lollagram.com" target="_blank" title="Lollagram - real time lollapalooza">Lollagram</a>  is a labor of love thatâ€™s designed to help you keep track of the Lollapalooza experience, through the eyes (or, more accurately, snapshots) of music lovers on the ground at Grant Park. Lollagram takes advantage of the Instagram Real Time API and aggregates the moments at Lollapalooza, creating a visual record of the bands, food, people, and city that make up this great musical tradition. With 45 million photos being uploaded to Instagram each day, we're excited to present snapshots from Lollapalooza 2013.</p>

<h2>The new version</h2>

<p>Check out the source code on <a href="https://github.com/weblancaster/instagram-real-time" target="_blank" title="github Lollagram - real time lollagram cosuming Instagram real time API">Lollagram source code.</a></p>

<p>The old version of Lollagram was a simple website built in PHP where you needed to click on the refresh button to pull the latest pictures shared on Instagram with the hashtags #lollapalooza #lollapalooza2012 or #lolla2012</p>

<p>While I was working for Golinharris I was also working on my side projects/experiments using NodeJS so I think two weeks before the event I started to talk with my co-worker and designer Daniel Branca that I was thinking to use cutting edge technologies to do a real time Application therefore much more engaging.</p>

<p>I was also about to leave the company to another company and I had one more week at Golinharris but I really wanted to work on it for fun and learning to use technologies like NodeJs, Socket.io, Client Side template (HandlebarsJs) and responsive web design where the user can follow on their smartphone, tablet, desktop or even on TV (and Yes I did for &quot;free&quot;).</p>

<p>I never had work with real time Application so I started to read and do some experiments with Socket.io coding a real time chat (as most developers do).
After understand the basic concept of Socket.io &quot;Real Time&quot; and discuss all the most important details of the Application with Dan (the designer) I started code the Application.</p>

<p>As I said before at that time I was leaving the company to work for another company and I was also preparing my slides/speak for the biggest conference in Brazil for Front End Developers/Engineers which I was invited to speak (topic for another post) and it would be in the same day I had to release the Application.</p>

<p>So in one week I had to start at the new company understand the new workflow, finish Lollagram Application and finish my slides/speak for the conference in Brazil.</p>

<h2>The Application</h2>

<p>I'm not going to describe in a lot of details it will be more a overview how I did it.</p>

<p>After understand how the Instagram real time API work I started to code the Back-end utilizing NodeJS (<a href="http://expressjs.com/" target="_blank" title="ExpressJS Framework">ExpressJS</a>) and hosted on <a href="http://www.heroku.com" target="Heroku cloud" title="Heroku cloud">Heroku</a> which is awesome and I could added monitoring to the server to debug and make sure everything on the server was/is running alright. <br>
I tried to find code examples to gain some time but I found anything good enough. Or the code were too old or was developed PHP or RoR so I ended up utilizing the library called <a href="https://github.com/mckelvey/instagram-node-lib" targte="_blank" title="Instagram node lib">instagram-node-lib</a> which helped me a lot and I gained some time.</p>

<p>After register my Application on Instagram and get my &quot;client id&quot; and &quot;client secret&quot; the most important things I needed to get it working was the steps below.</p>

<p>Remember I'm using the <a href="https://github.com/mckelvey/instagram-node-lib" targte="_blank" title="Instagram node lib">instagram-node-lib</a> so we don't need to do from scratch since time is/was very precious and we don't want to reinvent the wheel.</p>

<h3>Basic setup</h3>

<pre><code data-language="javascript">
Instagram.set('client_id', clientID);
Instagram.set('client_secret', clientSecret);
Instagram.set('callback_url', 'http://YOUR_URL.COM/callback');
Instagram.set('redirect_uri', 'http://YOUR_URL.com');
</code></pre>

<h3>The Handshake</h3>

<p>The <a href="http://en.wikipedia.org/wiki/Transmission_Control_Protocol" target="" title="Handshake">Handshake</a> is the confirmation connection between the servers.</p>

<pre><code data-language="javascript">
app.get('/callback', function(req, res){
    var handshake =  Instagram.subscriptions.handshake(req, res);
});
</code></pre>

<h3>First load</h3>

<p>When you access the Application for the first time you can noticed thirteen pictures are loaded.
Here I request the latest shared pictures on Instagram with hashtag #lollapalooza and utilizing Socket.io I transmit it to the client side as json.</p>

<p>Server sends the data to the client side.</p>

<pre><code data-language="javascript">
io.sockets.on('connection', function (socket) {
  Instagram.tags.recent({ 
      name: 'lollapalooza',
      complete: function(data) {
        socket.emit('firstShow', { firstShow: data });
      }
  });
});
</code></pre>

<p>On my method &quot;mostRecent&quot; the Socket.io on the client receives the data and parse/process using client side templating (HandlebarsJs) and append to the Application showing the latest pictures shared on Instagram.</p>

<pre><code data-language="javascript">
mostRecent: function() {
    socket.on('firstShow', function (data) {
        var
            query = data,
            source = $('#firstShow-tpl').html(),
            compiledTemplate = Handlebars.compile(source),
            result = compiledTemplate(query),
            imgWrap = $('#imgContent');

        imgWrap.html(result);
    });
},
</code></pre>

<h3>Subscribing to hashtags</h3>

<p>To receive the last updates from Instagram as real time first I needed to subscribe to the hashtags.</p>

<pre><code data-language="javascript">
Instagram.subscriptions.subscribe({
  object: 'tag',
  object_id: 'lollapalooza',
  aspect: 'media',
  callback_url: 'http://YOUR_URL.com/callback',
  type: 'subscription',
  id: '#'
});
</code></pre>

<h3>Real time &quot;time&quot;</h3>

<p>After subscribe to the hashtags I started to receive &quot;notifications&quot; from Instagram when someone shared pictures with the hashtags subscribed which is pretty cool specially when lots of people share and makes even more engaging.</p>

<p>One thing that I noticed is that Instagram real time API is unstable and if you go to the google groups where developers post problems and discuss solutions you can see there's a lot to get better.
Another thing is that you can receive 5000 &quot;notifications&quot; per hour and if you pass the limit the Instagram block your Application.</p>

<p>Here I send the url to the client side to make the Ajax request but theres another way to do it which is access the json response from Instagram &quot;notification&quot; on the server and get the last image to send to the client.</p>

<pre><code data-language="javascript">
app.post('/callback', function(req, res) {
    var data = req.body;

    data.forEach(function(tag) {
      var url = 'https://api.instagram.com/v1/tags/' + tag.object_id + '/media/recent?client_id=479edbf0004c42758987cf0244afd3ef';
      sendMessage(url);

    });
    res.end();
});

function sendMessage(url) {
  io.sockets.emit('show', { show: url });
}
</code></pre>

<p>On the client side I receive the data &quot;url&quot; and do Ajax request then I call my method to render the client side template.</p>

<pre><code data-language="javascript">
getData: function() {
    var self = this;
    socket.on('show', function(data) {
        var url = data.show;
        $.ajax({
            url: url,
            type: 'POST',
            crossDomain: true,
            dataType: 'jsonp'
        }).done(function (data) {
            self.renderTemplate(data);
        }); 
    });
}
</code></pre>

<h3>How to unsubscribe</h3>

<p>To unsubscribe is easy it just need the tag &quot;ID&quot; and done.</p>

<pre><code data-language="javascript">
Instagram.subscriptions.unsubscribe({ id: '#######' });
</code></pre>

<h3>Final thoughts</h3>

<ul>
<li>Work with Real Time is pretty cool and fun.</li>
<li>Instagram real time API isn't great but does the job.</li>
<li>Work in three different important things in one week is possible with one pack with ten monster energetic drink and less than four hours of sleep per night.</li>
<li>People love to share pictures. People love to see pictures.</li>
</ul>

<p>Check out the source code on <a href="https://github.com/weblancaster/instagram-real-time" target="_blank" title="github Lollagram - real time lollagram cosuming Instagram real time API">Lollagram source code.</a></p>
</div>

    <!-- <span class="meta"><small>By Michael Lancaster &copy; 2013</small></span> -->

            <div id="disqus_thread"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'michaellancaster'; // required: replace example with your forum shortname

		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>



	</div>

<!-- js -->
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
<script>window.jQuery || document.write('<script src="/assets/js/jquery.1.9.min.js"><\/script>')</script>

<script src="/assets/js/app.js"></script>
<script src="/assets/js/jet.min.js"></script>
<script src="/assets/js/widgets.js"></script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38152494-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>

</html>
